/*! For license information please see duckdb-browser-coi.pthread.worker.f569ef26f3d692f18daf.js.LICENSE.txt */
"use strict";(()=>{var yi=Object.create,ur=Object.defineProperty,wi=Object.getOwnPropertyDescriptor,vi=Object.getOwnPropertyNames,Ei=Object.getPrototypeOf,Ai=Object.prototype.hasOwnProperty,Xe=(r=function(e){if("undefined"!=typeof require)return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')},"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(r,{get:(e,t)=>("undefined"!=typeof require?require:e)[t]}):r),r,ki=(e,t)=>()=>(e&&(t=e(e=0)),t),ge=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Fi=(e,t)=>{for(var r in t)ur(e,r,{get:t[r],enumerable:!0})},Di=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of vi(t))!Ai.call(e,a)&&a!==r&&ur(e,a,{get:()=>t[a],enumerable:!(n=wi(t,a))||n.enumerable});return e},sr=(e,t,r)=>(r=null!=e?yi(Ei(e)):{},Di(!t&&e&&e.__esModule?r:ur(r,"default",{value:e,enumerable:!0}),e)),or=ge((()=>{})),lr=ge((()=>{})),fr=ge((()=>{})),jt=ge((()=>{})),Yt=ge((()=>{})),Gt={};Fi(Gt,{default:()=>_r});var cr,xi,_r,dr=ki((()=>{cr={},xi=(()=>{var e=cr.url;return function(t){function r(){return F.buffer!=P&&J(F.buffer),N}function n(){return F.buffer!=P&&J(F.buffer),B}function a(){return F.buffer!=P&&J(F.buffer),W}function o(){return F.buffer!=P&&J(F.buffer),q}function i(){return F.buffer!=P&&J(F.buffer),K}var u,s,l=typeof(t=t||{})<"u"?t:{};l.ready=new Promise((function(e,t){u=e,s=t}));var f,c,d,_,h,p=Object.assign({},l),m=[],b="./this.program",y=(e,t)=>{throw t},g="object"==typeof window,w="function"==typeof importScripts,v="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,A=l.ENVIRONMENT_IS_PTHREAD||!1,E="";function R(e){return l.locateFile?l.locateFile(e,E):E+e}if(v){let e;E=w?fr().dirname(E)+"/":__dirname+"/",h=()=>{_||(d=lr(),_=fr())},f=function(e,t){return h(),e=_.normalize(e),d.readFileSync(e,t?void 0:"utf8")},c=e=>{var t=f(e,!0);return t.buffer||(t=new Uint8Array(t)),t},process.argv.length>1&&(b=process.argv[1].replace(/\\/g,"/")),m=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof zt))throw e})),process.on("unhandledRejection",(function(e){throw e})),y=(e,t)=>{if(ne())throw process.exitCode=e,t;(function(e){e instanceof zt||M("exiting due to exception: "+e)})(t),process.exit(e)},l.inspect=function(){return"[Emscripten Module object]"};try{e=or()}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}global.Worker=e.Worker}else(g||w)&&(w?E=self.location.href:typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),e&&(E=e),E=0!==E.indexOf("blob:")?E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1):"",v||(f=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},w&&(c=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})));v&&typeof performance>"u"&&(global.performance=jt().performance);var H=console.log.bind(console),k=console.warn.bind(console);v&&(h(),H=e=>d.writeSync(1,e+"\n"),k=e=>d.writeSync(2,e+"\n"));var S,T=l.print||H,M=l.printErr||k;function C(e){C.shown||(C.shown={}),C.shown[e]||(C.shown[e]=1,M(e))}Object.assign(l,p),p=null,l.arguments&&(m=l.arguments),l.thisProgram&&(b=l.thisProgram),l.quit&&(y=l.quit),Atomics.load,Atomics.store,Atomics.compareExchange,l.wasmBinary&&(S=l.wasmBinary);var U=l.noExitRuntime||!0;"object"!=typeof WebAssembly&&le("no native wasm support detected");var F,D,I,O=!1;function x(e,t){e||le(t)}var P,N,B,W,X,q,K,L=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function j(e,t,r){for(var n=(t>>>=0)+r,a=t;e[a]&&!(a>=n);)++a;if(a-t>16&&e.buffer&&L)return L.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,a):e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(128&i){var u=63&e[t++];if(192!=(224&i)){var s=63&e[t++];if((i=224==(240&i)?(15&i)<<12|u<<6|s:(7&i)<<18|u<<12|s<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var l=i-65536;o+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else o+=String.fromCharCode((31&i)<<6|u)}else o+=String.fromCharCode(i)}return o}function $(e,t){return(e>>>=0)?j(n(),e,t):""}function Y(e,t,r,n){if(!(n>0))return 0;for(var a=r>>>=0,o=r+n-1,i=0;i<e.length;++i){var u=e.charCodeAt(i);if(u>=55296&&u<=57343&&(u=65536+((1023&u)<<10)|1023&e.charCodeAt(++i)),u<=127){if(r>=o)break;t[r++>>>0]=u}else if(u<=2047){if(r+1>=o)break;t[r++>>>0]=192|u>>6,t[r++>>>0]=128|63&u}else if(u<=65535){if(r+2>=o)break;t[r++>>>0]=224|u>>12,t[r++>>>0]=128|u>>6&63,t[r++>>>0]=128|63&u}else{if(r+3>=o)break;t[r++>>>0]=240|u>>18,t[r++>>>0]=128|u>>12&63,t[r++>>>0]=128|u>>6&63,t[r++>>>0]=128|63&u}}return t[r>>>0]=0,r-a}function z(e,t,r){return Y(e,n(),t,r)}function V(e,t){r().set(e,t>>>0)}function J(e){P=e,l.HEAP8=N=new Int8Array(e),l.HEAP16=W=new Int16Array(e),l.HEAP32=q=new Int32Array(e),l.HEAPU8=B=new Uint8Array(e),l.HEAPU16=X=new Uint16Array(e),l.HEAPU32=new Uint32Array(e),l.HEAPF32=new Float32Array(e),l.HEAPF64=K=new Float64Array(e)}A&&(P=l.buffer);var G=l.INITIAL_MEMORY||16777216;if(A)F=l.wasmMemory,P=l.buffer;else if(l.wasmMemory)F=l.wasmMemory;else if(!((F=new WebAssembly.Memory({initial:G/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw M("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),v&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");F&&(P=F.buffer),G=P.byteLength,J(P);var Q,Z=[],ee=[],te=[],re=[];function ne(){return U}function ae(){!A&&_e(ee)}var oe,ie=0,ue=null,se=null;function le(e){A?postMessage({cmd:"onAbort",arg:e}):l.onAbort&&l.onAbort(e),M(e="Aborted("+e+")"),O=!0,I=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw s(t),t}function fe(e){return e.startsWith("data:application/octet-stream;base64,")}function ce(e){try{if(e==oe&&S)return new Uint8Array(S);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(e){le(e)}}l.locateFile?fe(oe="./duckdb-coi.wasm")||(oe=R(oe)):oe=new URL("./duckdb-coi.wasm",cr.url).toString();var de={};function _e(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?Ee(r)():Ee(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(l)}}function he(e){var t=qt(),r=e();return Kt(t),r}function pe(e){var t=we.pthreads[e];if(t){o()[e>>>2]=0;var r=t.worker;we.returnWorkerToPool(r)}}function me(e,t){n().fill(0,e,e+t)}function be(e){var t=we.getNewWorker();if(!t)return 6;we.runningWorkers.push(t);var r=we.pthreads[e.pthread_ptr]={worker:t,threadInfoStruct:e.pthread_ptr};t.pthread=r;var n={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr};return t.runPthread=()=>{n.time=performance.now(),t.postMessage(n,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread),0}function ye(e){Jt(e)}function ge(e){if(e instanceof zt||"unwind"==e)return I;y(1,e)}var we={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],init:function(){A?we.initWorker():we.initMainThread()},initMainThread:function(){for(var e=0;e<4;++e)we.allocateUnusedWorker()},initWorker:function(){U=!1},pthreads:{},setExitStatus:function(e){I=e},terminateAllThreads:function(){for(var e in we.pthreads){var t=we.pthreads[e];t&&t.worker&&we.returnWorkerToPool(t.worker)}for(var r=0;r<we.unusedWorkers.length;++r)we.unusedWorkers[r].terminate();we.unusedWorkers=[]},returnWorkerToPool:function(e){we.runWithoutMainThreadQueuedCalls((function(){delete we.pthreads[e.pthread.threadInfoStruct],we.unusedWorkers.push(e),we.runningWorkers.splice(we.runningWorkers.indexOf(e),1),Nt(e.pthread.threadInfoStruct),e.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(e){o()[$t>>>2]=0;try{e()}finally{o()[$t>>>2]=1}},receiveObjectTransfer:function(e){},threadInit:function(){for(var e in we.tlsInitFunctions)we.tlsInitFunctions.hasOwnProperty(e)&&we.tlsInitFunctions[e]()},loadWasmModuleToWorker:function(e,t){e.onmessage=r=>{var n=r.data,a=n.cmd;if(e.pthread&&(we.currentProxiedOperationCallerThread=e.pthread.threadInfoStruct),n.targetThread&&n.targetThread!=Bt()){var i=we.pthreads[n.targetThread];return i?i.worker.postMessage(n,n.transferList):M('Internal error! Worker sent a message "'+a+'" to target pthread '+n.targetThread+", but that thread no longer exists!"),void(we.currentProxiedOperationCallerThread=void 0)}"processProxyingQueue"===a?ft(n.queue):"spawnThread"===a?be(n):"cleanupThread"===a?pe(n.thread):"killThread"===a?function(e){o()[e>>>2]=0;var t=we.pthreads[e];delete we.pthreads[e],t.worker.terminate(),Nt(e),we.runningWorkers.splice(we.runningWorkers.indexOf(t.worker),1),t.worker.pthread=void 0}(n.thread):"cancelThread"===a?function(e){we.pthreads[e].worker.postMessage({cmd:"cancel"})}(n.thread):"loaded"===a?(e.loaded=!0,t&&t(e),e.runPthread&&(e.runPthread(),delete e.runPthread)):"print"===a?T("Thread "+n.threadId+": "+n.text):"printErr"===a?M("Thread "+n.threadId+": "+n.text):"alert"===a?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?e.postMessage(n):"onAbort"===a?l.onAbort&&l.onAbort(n.arg):a&&M("worker sent an unknown command "+a),we.currentProxiedOperationCallerThread=void 0},e.onerror=e=>{throw M("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},v&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})),e.on("detachedExit",(function(){}))),e.postMessage({cmd:"load",urlOrBlob:l.mainScriptUrlOrBlob,wasmMemory:F,wasmModule:D})},allocateUnusedWorker:function(){if(l.locateFile){var e=R("duckdb_wasm.worker.js");we.unusedWorkers.push(new Worker(e))}else we.unusedWorkers.push(new Worker(new URL("duckdb_wasm.worker.js",cr.url)))},getNewWorker:function(){return 0==we.unusedWorkers.length&&(we.allocateUnusedWorker(),we.loadWasmModuleToWorker(we.unusedWorkers[0])),we.unusedWorkers.pop()}};function ve(e){if(A)return ct(1,0,e);try{ye(e)}catch(e){ge(e)}}l.establishStackSpace=function(){var e=Bt(),t=o()[e+44>>>2],r=o()[e+48>>>2];Xt(t,t-r),Kt(t)};var Ae=[];function Ee(e){var t=Ae[e];return t||(e>=Ae.length&&(Ae.length=e+1),Ae[e]=t=Q.get(e)),t}function Re(e,t,r,n){return A?ct(2,1,e,t,r,n):He(e,t,r,n)}function He(e,t,r,n){if(typeof SharedArrayBuffer>"u")return M("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];if(A&&0===a.length)return Re(e,t,r,n);var o={startRoutine:r,pthread_ptr:e,arg:n,transferList:a};return A?(o.cmd="spawnThread",postMessage(o,a),0):be(o)}l.invokeEntryPoint=function(e,t){return Ee(e)(t)};var ke={buffers:[null,[],[]],printChar:function(e,t){var r=ke.buffers[e];0===t||10===t?((1===e?T:M)(j(r,0)),r.length=0):r.push(t)},varargs:void 0,get:function(){return ke.varargs+=4,o()[ke.varargs-4>>>2]},getStr:function(e){return $(e)}};function Se(e,t,r,n,a){if(A)return ct(3,1,e,t,r,n,a)}function Te(){M("missing function: $SOCKFS"),le(-1)}function Me(){M("missing function: $FS"),le(-1)}function Ce(e){var t=Te.getSocket(e);if(!t)throw new Me.ErrnoError(8);return t}function Ue(e){return(255&e)+"."+(e>>8&255)+"."+(e>>16&255)+"."+(e>>24&255)}function Fe(e){var t="",r=0,n=0,a=0,o=0,i=0,u=0,s=[65535&e[0],e[0]>>16,65535&e[1],e[1]>>16,65535&e[2],e[2]>>16,65535&e[3],e[3]>>16],l=!0,f="";for(u=0;u<5;u++)if(0!==s[u]){l=!1;break}if(l){if(f=Ue(s[6]|s[7]<<16),-1===s[5])return(t="::ffff:")+f;if(0===s[5])return"0.0.0.0"===f&&(f=""),"0.0.0.1"===f&&(f="1"),(t="::")+f}for(r=0;r<8;r++)0===s[r]&&(r-a>1&&(i=0),a=r,i++),i>n&&(o=r-(n=i)+1);for(r=0;r<8;r++)n>1&&0===s[r]&&r>=o&&r<o+n?r===o&&(t+=":",0===o&&(t+=":")):(t+=Number(xt(65535&s[r])).toString(16),t+=r<7?":":"");return t}function De(e,t){var r,n=a()[e>>>1],i=xt((F.buffer!=P&&J(F.buffer),X)[e+2>>>1]);switch(n){case 2:if(16!==t)return{errno:28};r=Ue(r=o()[e+4>>>2]);break;case 10:if(28!==t)return{errno:28};r=Fe(r=[o()[e+8>>>2],o()[e+12>>>2],o()[e+16>>>2],o()[e+20>>>2]]);break;default:return{errno:5}}return{family:n,addr:r,port:i}}function Ie(e){for(var t=e.split("."),r=0;r<4;r++){var n=Number(t[r]);if(isNaN(n))return null;t[r]=n}return(t[0]|t[1]<<8|t[2]<<16|t[3]<<24)>>>0}function Oe(e){return parseInt(e)}function xe(e){var t,r,n,a,o=[];if(!/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i.test(e))return null;if("::"===e)return[0,0,0,0,0,0,0,0];for((e=e.startsWith("::")?e.replace("::","Z:"):e.replace("::",":Z:")).indexOf(".")>0?((t=(e=e.replace(new RegExp("[.]","g"),":")).split(":"))[t.length-4]=Oe(t[t.length-4])+256*Oe(t[t.length-3]),t[t.length-3]=Oe(t[t.length-2])+256*Oe(t[t.length-1]),t=t.slice(0,t.length-2)):t=e.split(":"),n=0,a=0,r=0;r<t.length;r++)if("string"==typeof t[r])if("Z"===t[r]){for(a=0;a<8-t.length+1;a++)o[r+a]=0;n=a-1}else o[r+n]=It(parseInt(t[r],16));else o[r+n]=t[r];return[o[1]<<16|o[0],o[3]<<16|o[2],o[5]<<16|o[4],o[7]<<16|o[6]]}var Pe={address_map:{id:1,addrs:{},names:{}},lookup_name:function(e){var t,r=Ie(e);if(null!==r||null!==(r=xe(e)))return e;if(Pe.address_map.addrs[e])t=Pe.address_map.addrs[e];else{var n=Pe.address_map.id++;x(n<65535,"exceeded max address mappings of 65535"),t="172.29."+(255&n)+"."+(65280&n),Pe.address_map.names[t]=e,Pe.address_map.addrs[e]=t}return t},lookup_addr:function(e){return Pe.address_map.names[e]?Pe.address_map.names[e]:null}};function Ne(e,t,r){if(r&&0===e)return null;var n=De(e,t);if(n.errno)throw new Me.ErrnoError(n.errno);return n.addr=Pe.lookup_addr(n.addr)||n.addr,n}function Be(e,t,r){if(A)return ct(4,1,e,t,r);var n=Ce(e),a=Ne(t,r);return n.sock_ops.bind(n,a.addr,a.port),0}function We(e,t,r){if(A)return ct(5,1,e,t,r);var n=Ce(e),a=Ne(t,r);return n.sock_ops.connect(n,a.addr,a.port),0}function qe(e,t,r,n){return A?ct(6,1,e,t,r,n):(t=ke.getStr(t),t=ke.calculateAt(e,t),ke.doAccess(t,r))}function Ke(e,t,r){return A?ct(7,1,e,t,r):(ke.varargs=r,0)}function Le(e,t){if(A)return ct(8,1,e,t)}function je(e,t,r){if(A)return ct(9,1,e,t,r)}function $e(e,t,r){if(A)return ct(10,1,e,t,r)}function Ye(e,t,r,n,i){switch(t){case 2:r=Ie(r),me(e,16),i&&(o()[i>>>2]=16),a()[e>>>1]=t,o()[e+4>>>2]=r,a()[e+2>>>1]=It(n);break;case 10:r=xe(r),me(e,28),i&&(o()[i>>>2]=28),o()[e>>>2]=t,o()[e+8>>>2]=r[0],o()[e+12>>>2]=r[1],o()[e+16>>>2]=r[2],o()[e+20>>>2]=r[3],a()[e+2>>>1]=It(n);break;default:return 5}return 0}function ze(e,t,r){if(A)return ct(11,1,e,t,r);var n=Ce(e);return n.daddr?(Ye(t,n.family,Pe.lookup_name(n.daddr),n.dport,r),0):-53}function Ve(e,t,r,n,a){if(A)return ct(12,1,e,t,r,n,a);var i=Ce(e);return 1===t&&4===r?(o()[n>>>2]=i.error,o()[a>>>2]=4,i.error=null,0):-50}function Je(e,t,r){return A?ct(13,1,e,t,r):(ke.varargs=r,0)}function Ge(e,t){if(A)return ct(14,1,e,t)}function Qe(e,t,r){if(A)return ct(15,1,e,t,r)}function Ze(e,t,r,n){if(A)return ct(16,1,e,t,r,n)}function et(e,t,r,n){if(A)return ct(17,1,e,t,r,n);ke.varargs=n}function tt(e,t,r,a,o,i){if(A)return ct(18,1,e,t,r,a,o,i);var u=Ce(e),s=u.sock_ops.recvmsg(u,r);return s?(o&&Ye(o,u.family,Pe.lookup_name(s.addr),s.port,i),n().set(s.buffer,t>>>0),s.buffer.byteLength):0}function rt(e,t,r,n){if(A)return ct(19,1,e,t,r,n)}function nt(e){if(A)return ct(20,1,e)}function at(e,t,r,n,a,o){if(A)return ct(21,1,e,t,r,n,a,o)}function ot(e,t,r){if(A)return ct(22,1,e,t,r)}function it(e,t){if(A)return ct(23,1,e,t)}function ut(e,t,r){if(A)return ct(24,1,e,t,r)}var st,lt="To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking";function ft(e){try{Bt()&&Pt(e)}finally{Atomics.sub(o(),e>>2,1)}}function ct(e,t){var r=arguments.length-2,n=arguments;return he((function(){for(var a=r,o=Lt(8*a),u=o>>3,s=0;s<r;s++){var l=n[2+s];i()[u+s>>>0]=l}return Ot(e,a,o,t)}))}st=v?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:A?()=>performance.now()-l.__performance_now_clock_drift:()=>performance.now();var dt=[];function _t(e){try{return F.grow(e-P.byteLength+65535>>>16),J(F.buffer),1}catch(e){}}var ht={};function pt(){if(!pt.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:b||"./this.program"};for(var t in ht)void 0===ht[t]?delete e[t]:e[t]=ht[t];var r=[];for(var t in e)r.push(t+"="+e[t]);pt.strings=r}return pt.strings}function mt(e,t){if(A)return ct(25,1,e,t);var n=0;return pt().forEach((function(a,i){var u=t+n;o()[e+4*i>>>2]=u,function(e,t,n){for(var a=0;a<e.length;++a)r()[t++>>>0]=e.charCodeAt(a);r()[t>>>0]=0}(a,u),n+=a.length+1})),0}function bt(e,t){if(A)return ct(26,1,e,t);var r=pt();o()[e>>>2]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),o()[t>>>2]=n,0}function yt(e){return A?ct(27,1,e):0}function gt(e,t,r,n,a,i){if(A)return ct(28,1,e,t,r,n,a,i);var u=ke.getStreamFromFD(e),s=ke.doReadv(u,t,r,n);return o()[i>>>2]=s,0}function wt(e,t,r,n,a,i){if(A)return ct(29,1,e,t,r,n,a,i);var u=ke.getStreamFromFD(e),s=ke.doWritev(u,t,r,n);return o()[i>>>2]=s,0}function vt(e,t,r,n){if(A)return ct(30,1,e,t,r,n);var a=ke.getStreamFromFD(e),i=ke.doReadv(a,t,r);return o()[n>>>2]=i,0}function At(e,t,r,n,a){if(A)return ct(31,1,e,t,r,n,a)}function Et(e){if(A)return ct(32,1,e);var t=ke.getStreamFromFD(e);return t.stream_ops&&t.stream_ops.fsync?-t.stream_ops.fsync(t):0}function Rt(e,t,r,a){if(A)return ct(33,1,e,t,r,a);for(var i=0,u=0;u<r;u++){var s=o()[t>>>2],l=o()[t+4>>>2];t+=8;for(var f=0;f<l;f++)ke.printChar(e,n()[s+f>>>0]);i+=l}return o()[a>>>2]=i,0}function Ht(e,t,r,n){if(A)return ct(34,1,e,t,r,n);var a,i=0,u=0,s=0,l=0,f=0,c=0;function d(e,t,r,n,a,i){var u,s,l;return s=10===e?28:16,a=10===e?Fe(a):Ue(a),x(!Ye(u=Wt(s),e,a,i)),l=Wt(32),o()[l+4>>>2]=e,o()[l+8>>>2]=t,o()[l+12>>>2]=r,o()[l+24>>>2]=n,o()[l+20>>>2]=u,o()[l+16>>>2]=10===e?28:16,o()[l+28>>>2]=0,l}if(r&&(s=o()[r>>>2],l=o()[r+4>>>2],f=o()[r+8>>>2],c=o()[r+12>>>2]),f&&!c&&(c=2===f?17:6),!f&&c&&(f=17===c?2:1),0===c&&(c=6),0===f&&(f=1),!e&&!t)return-2;if(-1088&s||0!==r&&2&o()[r>>>2]&&!e)return-1;if(32&s)return-2;if(0!==f&&1!==f&&2!==f)return-7;if(0!==l&&2!==l&&10!==l)return-6;if(t&&(t=$(t),u=parseInt(t,10),isNaN(u)))return 1024&s?-2:-8;if(!e)return 0===l&&(l=2),0==(1&s)&&(i=2===l?Dt(2130706433):[0,0,0,1]),a=d(l,f,c,null,i,u),o()[n>>>2]=a,0;if(null!==(i=Ie(e=$(e))))if(0===l||2===l)l=2;else{if(!(10===l&&8&s))return-2;i=[0,0,Dt(65535),i],l=10}else if(null!==(i=xe(e))){if(0!==l&&10!==l)return-2;l=10}return null!=i?(a=d(l,f,c,e,i,u),o()[n>>>2]=a,0):4&s?-2:(i=Ie(e=Pe.lookup_name(e)),0===l?l=2:10===l&&(i=[0,0,Dt(65535),i]),a=d(l,f,c,null,i,u),o()[n>>>2]=a,0)}function kt(e){return e%4==0&&(e%100!=0||e%400==0)}var St=[31,29,31,30,31,30,31,31,30,31,30,31],Tt=[31,28,31,30,31,30,31,31,30,31,30,31];we.init();var Mt,Ct=[null,ve,Re,Se,Be,We,qe,Ke,Le,je,$e,ze,Ve,Je,Ge,Qe,Ze,et,tt,rt,nt,at,ot,it,ut,mt,bt,yt,gt,wt,vt,At,Et,Rt,Ht],Ut={b:function(e,t,r,n){le("Assertion failed: "+$(e)+", at: "+[t?$(t):"unknown filename",r,n?$(n):"unknown function"])},v:function(e){Ft(e,!w,1,!g),we.threadInit()},s:function(e){A?postMessage({cmd:"cleanupThread",thread:e}):pe(e)},aa:He,W:Se,Y:Be,X:We,Q:qe,c:Ke,ia:Le,y:je,ea:$e,S:ze,V:Ve,ka:Je,fa:Ge,ja:Qe,ga:Ze,r:et,T:tt,N:rt,p:nt,U:at,l:ot,ha:it,q:ut,Z:function(e){},o:function(e,t){le(lt)},_:function(e,t){le(lt)},sa:function(){return Date.now()},ba:function(){return 2097152},ra:function(){return!0},da:function(e,t,r,n){if(e==t)setTimeout((()=>ft(n)));else if(A)postMessage({targetThread:e,cmd:"processProxyingQueue",queue:n});else{var a=we.pthreads[e],o=a&&a.worker;if(!o)return;o.postMessage({cmd:"processProxyingQueue",queue:n})}return 1},I:function(e,t,r){return-1},f:function(){le("")},G:function(e,t){return globalThis.DUCKDB_RUNTIME.createDirectory(l,e,t)},H:function(e,t){return globalThis.DUCKDB_RUNTIME.checkDirectory(l,e,t)},E:function(e,t){return globalThis.DUCKDB_RUNTIME.listDirectoryEntries(l,e,t)},F:function(e,t){return globalThis.DUCKDB_RUNTIME.removeDirectory(l,e,t)},k:function(e){return globalThis.DUCKDB_RUNTIME.closeFile(l,e)},C:function(e,t){return globalThis.DUCKDB_RUNTIME.checkFile(l,e,t)},K:function(e){return globalThis.DUCKDB_RUNTIME.getLastFileModificationTime(l,e)},D:function(e,t,r,n){return globalThis.DUCKDB_RUNTIME.moveFile(l,e,t,r,n)},L:function(e,t){return globalThis.DUCKDB_RUNTIME.openFile(l,e,t)},g:function(e,t,r,n){return globalThis.DUCKDB_RUNTIME.readFile(l,e,t,r,n)},J:function(e,t){return globalThis.DUCKDB_RUNTIME.truncateFile(l,e,t)},h:function(e,t,r,n){return globalThis.DUCKDB_RUNTIME.writeFile(l,e,t,r,n)},B:function(e,t){return globalThis.DUCKDB_RUNTIME.glob(l,e,t)},j:function(e){return globalThis.DUCKDB_RUNTIME.testPlatformFeature(l,e)},M:function(e,t,r,n,a,o){return globalThis.DUCKDB_RUNTIME.callScalarUDF(l,e,t,r,n,a,o)},m:function(){v||w||C("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},la:function(){return 4294901760},d:st,P:function(e,t,r){n().copyWithin(e>>>0,t>>>0,t+r>>>0)},ma:function(){return v?Yt().cpus().length:navigator.hardwareConcurrency},z:function(e,t,r){dt.length=t;for(var n=r>>3,a=0;a<t;a++)dt[a]=i()[n+a>>>0];return(e<0?de[-e-1]:Ct[e]).apply(null,dt)},qa:function(e){var t=n().length;if((e>>>=0)<=t)return!1;var r,a=4294901760;if(e>a)return!1;for(var o=1;o<=4;o*=2){var i=t*(1+.2/o);if(i=Math.min(i,e+100663296),_t(Math.min(a,(r=Math.max(e,i))+(65536-r%65536)%65536)))return!0}return!1},u:function(){throw"unwind"},oa:mt,pa:bt,$:ye,e:yt,x:gt,w:wt,t:vt,A:At,O:Et,i:Rt,n:Ht,ca:function e(t,n){e.randomDevice||(e.randomDevice=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}if(v)try{var t=Xe("crypto");return function(){return t.randomBytes(1)[0]}}catch(e){}return function(){le("randomDevice")}}());for(var a=0;a<n;a++)r()[t+a>>>0]=e.randomDevice();return 0},R:function(e,t,r,n,a,o,i){var u=De(e,t);if(u.errno)return-6;var s=u.port,l=u.addr,f=!1;if(r&&n){var c;if(1&i||!(c=Pe.lookup_addr(l))){if(8&i)return-2}else l=c;z(l,r,n)+1>=n&&(f=!0)}return a&&o&&z(s=""+s,a,o)+1>=o&&(f=!0),f?-12:0},a:F||l.wasmMemory,na:function(e,t,r,n){return function(e,t,r,n){var a=o()[n+40>>>2],i={tm_sec:o()[n>>>2],tm_min:o()[n+4>>>2],tm_hour:o()[n+8>>>2],tm_mday:o()[n+12>>>2],tm_mon:o()[n+16>>>2],tm_year:o()[n+20>>>2],tm_wday:o()[n+24>>>2],tm_yday:o()[n+28>>>2],tm_isdst:o()[n+32>>>2],tm_gmtoff:o()[n+36>>>2],tm_zone:a?$(a):""},u=$(r),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var l in s)u=u.replace(new RegExp(l,"g"),s[l]);var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(e,t,r){for(var n="number"==typeof e?e.toString():e||"";n.length<t;)n=r[0]+n;return n}function _(e,t){return d(e,t,"0")}function h(e,t){function r(e){return e<0?-1:e>0?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function p(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function m(e){var t=function(e,t){for(var r=new Date(e.getTime());t>0;){var n=kt(r.getFullYear()),a=r.getMonth(),o=(n?St:Tt)[a];if(!(t>o-r.getDate()))return r.setDate(r.getDate()+t),r;t-=o-r.getDate()+1,r.setDate(1),a<11?r.setMonth(a+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r}(new Date(e.tm_year+1900,0,1),e.tm_yday),r=new Date(t.getFullYear(),0,4),n=new Date(t.getFullYear()+1,0,4),a=p(r),o=p(n);return h(a,t)<=0?h(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var b={"%a":function(e){return f[e.tm_wday].substring(0,3)},"%A":function(e){return f[e.tm_wday]},"%b":function(e){return c[e.tm_mon].substring(0,3)},"%B":function(e){return c[e.tm_mon]},"%C":function(e){return _((e.tm_year+1900)/100|0,2)},"%d":function(e){return _(e.tm_mday,2)},"%e":function(e){return d(e.tm_mday,2," ")},"%g":function(e){return m(e).toString().substring(2)},"%G":function(e){return m(e)},"%H":function(e){return _(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),_(t,2)},"%j":function(e){return _(e.tm_mday+function(e,t){for(var r=0,n=0;n<=t;r+=e[n++]);return r}(kt(e.tm_year+1900)?St:Tt,e.tm_mon-1),3)},"%m":function(e){return _(e.tm_mon+1,2)},"%M":function(e){return _(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return _(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=e.tm_yday+7-e.tm_wday;return _(Math.floor(t/7),2)},"%V":function(e){var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(53==t){var r=(e.tm_wday+371-e.tm_yday)%7;4!=r&&(3!=r||!kt(e.tm_year))&&(t=1)}}else{t=52;var n=(e.tm_wday+7-e.tm_yday-1)%7;(4==n||5==n&&kt(e.tm_year%400-1))&&t++}return _(t,2)},"%w":function(e){return e.tm_wday},"%W":function(e){var t=e.tm_yday+7-(e.tm_wday+6)%7;return _(Math.floor(t/7),2)},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,r=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(r?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var l in u=u.replace(/%%/g,"\0\0"),b)u.includes(l)&&(u=u.replace(new RegExp(l,"g"),b[l](i)));var y=function(e,t,r){var n=function(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}(e)+1,a=new Array(n);return Y(e,a,0,a.length),a}(u=u.replace(/\0\0/g,"%"));return y.length>t?0:(V(y,e),y.length-1)}(e,t,r,n)}},Ft=(function(){var e={a:Ut};function t(e,t){var r=e.exports;if(l.asm=r,function(e){we.tlsInitFunctions.push(e)}(l.asm.gb),Q=l.asm.tb,function(e){ee.unshift(e)}(l.asm.ta),D=t,!A){var n=we.unusedWorkers.length;we.unusedWorkers.forEach((function(e){we.loadWasmModuleToWorker(e,(function(){--n||function(e){if(ie--,l.monitorRunDependencies&&l.monitorRunDependencies(ie),0==ie&&(null!==ue&&(clearInterval(ue),ue=null),se)){var t=se;se=null,t()}}()}))}))}}function r(e){t(e.instance,e.module)}function n(t){return(S||!g&&!w||"function"!=typeof fetch?Promise.resolve().then((function(){return ce(oe)})):fetch(oe,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+oe+"'";return e.arrayBuffer()})).catch((function(){return ce(oe)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){M("failed to asynchronously prepare wasm: "+e),le(e)}))}if(A||(ie++,l.monitorRunDependencies&&l.monitorRunDependencies(ie)),l.instantiateWasm)try{return l.instantiateWasm(e,t)}catch(e){return M("Module.instantiateWasm callback failed with error: "+e),!1}(S||"function"!=typeof WebAssembly.instantiateStreaming||fe(oe)||"function"!=typeof fetch?n(r):fetch(oe,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return M("wasm streaming compile failed: "+e),M("falling back to ArrayBuffer instantiation"),n(r)}))}))).catch(s)}(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.ta).apply(null,arguments)},l._main=function(){return(l._main=l.asm.ua).apply(null,arguments)},l._duckdb_web_fs_glob_add_path=function(){return(l._duckdb_web_fs_glob_add_path=l.asm.va).apply(null,arguments)},l._duckdb_web_clear_response=function(){return(l._duckdb_web_clear_response=l.asm.wa).apply(null,arguments)},l._duckdb_web_fail_with=function(){return(l._duckdb_web_fail_with=l.asm.xa).apply(null,arguments)},l._duckdb_web_reset=function(){return(l._duckdb_web_reset=l.asm.ya).apply(null,arguments)},l._duckdb_web_connect=function(){return(l._duckdb_web_connect=l.asm.za).apply(null,arguments)},l._duckdb_web_disconnect=function(){return(l._duckdb_web_disconnect=l.asm.Aa).apply(null,arguments)},l._duckdb_web_flush_files=function(){return(l._duckdb_web_flush_files=l.asm.Ba).apply(null,arguments)},l._duckdb_web_flush_file=function(){return(l._duckdb_web_flush_file=l.asm.Ca).apply(null,arguments)},l._duckdb_web_open=function(){return(l._duckdb_web_open=l.asm.Da).apply(null,arguments)},l._duckdb_web_get_global_file_info=function(){return(l._duckdb_web_get_global_file_info=l.asm.Ea).apply(null,arguments)},l._duckdb_web_collect_file_stats=function(){return(l._duckdb_web_collect_file_stats=l.asm.Fa).apply(null,arguments)},l._duckdb_web_export_file_stats=function(){return(l._duckdb_web_export_file_stats=l.asm.Ga).apply(null,arguments)},l._duckdb_web_fs_drop_file=function(){return(l._duckdb_web_fs_drop_file=l.asm.Ha).apply(null,arguments)},l._duckdb_web_fs_drop_files=function(){return(l._duckdb_web_fs_drop_files=l.asm.Ia).apply(null,arguments)},l._duckdb_web_fs_glob_file_infos=function(){return(l._duckdb_web_fs_glob_file_infos=l.asm.Ja).apply(null,arguments)},l._duckdb_web_fs_get_file_info_by_id=function(){return(l._duckdb_web_fs_get_file_info_by_id=l.asm.Ka).apply(null,arguments)},l._duckdb_web_fs_get_file_info_by_name=function(){return(l._duckdb_web_fs_get_file_info_by_name=l.asm.La).apply(null,arguments)},l._duckdb_web_fs_set_file_descriptor=function(){return(l._duckdb_web_fs_set_file_descriptor=l.asm.Ma).apply(null,arguments)},l._duckdb_web_fs_register_file_url=function(){return(l._duckdb_web_fs_register_file_url=l.asm.Na).apply(null,arguments)},l._duckdb_web_fs_register_file_buffer=function(){return(l._duckdb_web_fs_register_file_buffer=l.asm.Oa).apply(null,arguments)},l._duckdb_web_copy_file_to_buffer=function(){return(l._duckdb_web_copy_file_to_buffer=l.asm.Pa).apply(null,arguments)},l._duckdb_web_copy_file_to_path=function(){return(l._duckdb_web_copy_file_to_path=l.asm.Qa).apply(null,arguments)},l._duckdb_web_get_version=function(){return(l._duckdb_web_get_version=l.asm.Ra).apply(null,arguments)},l._duckdb_web_get_feature_flags=function(){return(l._duckdb_web_get_feature_flags=l.asm.Sa).apply(null,arguments)},l._duckdb_web_tokenize=function(){return(l._duckdb_web_tokenize=l.asm.Ta).apply(null,arguments)},l._duckdb_web_udf_scalar_create=function(){return(l._duckdb_web_udf_scalar_create=l.asm.Ua).apply(null,arguments)},l._duckdb_web_prepared_create=function(){return(l._duckdb_web_prepared_create=l.asm.Va).apply(null,arguments)},l._duckdb_web_prepared_close=function(){return(l._duckdb_web_prepared_close=l.asm.Wa).apply(null,arguments)},l._duckdb_web_prepared_run=function(){return(l._duckdb_web_prepared_run=l.asm.Xa).apply(null,arguments)},l._duckdb_web_prepared_send=function(){return(l._duckdb_web_prepared_send=l.asm.Ya).apply(null,arguments)},l._duckdb_web_query_run=function(){return(l._duckdb_web_query_run=l.asm.Za).apply(null,arguments)},l._duckdb_web_pending_query_start=function(){return(l._duckdb_web_pending_query_start=l.asm._a).apply(null,arguments)},l._duckdb_web_pending_query_poll=function(){return(l._duckdb_web_pending_query_poll=l.asm.$a).apply(null,arguments)},l._duckdb_web_pending_query_cancel=function(){return(l._duckdb_web_pending_query_cancel=l.asm.ab).apply(null,arguments)},l._duckdb_web_query_fetch_results=function(){return(l._duckdb_web_query_fetch_results=l.asm.bb).apply(null,arguments)},l._duckdb_web_get_tablenames=function(){return(l._duckdb_web_get_tablenames=l.asm.cb).apply(null,arguments)},l._duckdb_web_insert_arrow_from_ipc_stream=function(){return(l._duckdb_web_insert_arrow_from_ipc_stream=l.asm.db).apply(null,arguments)},l._duckdb_web_insert_csv_from_path=function(){return(l._duckdb_web_insert_csv_from_path=l.asm.eb).apply(null,arguments)},l._duckdb_web_insert_json_from_path=function(){return(l._duckdb_web_insert_json_from_path=l.asm.fb).apply(null,arguments)},l._emscripten_tls_init=function(){return(l._emscripten_tls_init=l.asm.gb).apply(null,arguments)},l.__emscripten_thread_init=function(){return(Ft=l.__emscripten_thread_init=l.asm.hb).apply(null,arguments)}),Dt=(l.__emscripten_thread_crashed=function(){return(l.__emscripten_thread_crashed=l.asm.ib).apply(null,arguments)},l._htonl=function(){return(Dt=l._htonl=l.asm.jb).apply(null,arguments)}),It=l._htons=function(){return(It=l._htons=l.asm.kb).apply(null,arguments)},Ot=l._emscripten_run_in_main_runtime_thread_js=function(){return(Ot=l._emscripten_run_in_main_runtime_thread_js=l.asm.lb).apply(null,arguments)},xt=l._ntohs=function(){return(xt=l._ntohs=l.asm.mb).apply(null,arguments)},Pt=l._emscripten_proxy_execute_queue=function(){return(Pt=l._emscripten_proxy_execute_queue=l.asm.nb).apply(null,arguments)},Nt=l.__emscripten_thread_free_data=function(){return(Nt=l.__emscripten_thread_free_data=l.asm.ob).apply(null,arguments)},Bt=(l.__emscripten_thread_exit=function(){return(l.__emscripten_thread_exit=l.asm.pb).apply(null,arguments)},l._pthread_self=function(){return(Bt=l._pthread_self=l.asm.qb).apply(null,arguments)}),Wt=l._malloc=function(){return(Wt=l._malloc=l.asm.rb).apply(null,arguments)},Xt=(l._free=function(){return(l._free=l.asm.sb).apply(null,arguments)},l._emscripten_stack_set_limits=function(){return(Xt=l._emscripten_stack_set_limits=l.asm.ub).apply(null,arguments)}),qt=l.stackSave=function(){return(qt=l.stackSave=l.asm.vb).apply(null,arguments)},Kt=l.stackRestore=function(){return(Kt=l.stackRestore=l.asm.wb).apply(null,arguments)},Lt=l.stackAlloc=function(){return(Lt=l.stackAlloc=l.asm.xb).apply(null,arguments)},$t=l.__emscripten_allow_main_runtime_queued_calls=1073680;function zt(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Vt(e){if(e=e||m,!(ie>0)){if(A)return u(l),ae(),void postMessage({cmd:"loaded"});(function(){if(l.preRun)for("function"==typeof l.preRun&&(l.preRun=[l.preRun]);l.preRun.length;)e=l.preRun.shift(),Z.unshift(e);var e;_e(Z)})(),ie>0||(l.setStatus?(l.setStatus("Running..."),setTimeout((function(){setTimeout((function(){l.setStatus("")}),1),t()}),1)):t())}function t(){Mt||(Mt=!0,l.calledRun=!0,!O&&(ae(),A||_e(te),u(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),Gt&&function(e){var t=l._main;try{Jt(t(0,0),!0)}catch(e){return ge(e)}}(),function(){if(!A){if(l.postRun)for("function"==typeof l.postRun&&(l.postRun=[l.postRun]);l.postRun.length;)e=l.postRun.shift(),re.unshift(e);_e(re)}var e}()))}}function Jt(e,t){if(I=e,!t&&A)throw ve(e),"unwind";!function(e){I=e,ne()||(we.terminateAllThreads(),l.onExit&&l.onExit(e),O=!0),y(e,new zt(e))}(e)}if(l.ccall=function(e,t,r,n,a){var o={string:function(e){var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2);z(e,t=Lt(r),r)}return t},array:function(e){var t=Lt(e.length);return V(e,t),t}},i=function(e){return l["_"+e]}(e),u=[],s=0;if(n)for(var f=0;f<n.length;f++){var c=o[r[f]];c?(0===s&&(s=qt()),u[f]=c(n[f])):u[f]=n[f]}var d,_=i.apply(null,u);return d=_,0!==s&&Kt(s),_=function(e){return"string"===t?$(e):"boolean"===t?Boolean(e):e}(d),_},l.keepRuntimeAlive=ne,l.PThread=we,l.PThread=we,l.wasmMemory=F,l.ExitStatus=zt,se=function e(){Mt||Vt(),Mt||(se=e)},l.run=Vt,l.preInit)for("function"==typeof l.preInit&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();var Gt=!0;return l.noInitialRun&&(Gt=!1),Vt(),t.ready}})(),_r=xi})),Qt=ge(((exports,module)=>{(function(){var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD="function"==typeof define&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e,t){return function(r){return new Sha256(t,!0).update(r)[e]()}},createMethod=function(e){var t=createOutputMethod("hex",e);NODE_JS&&(t=nodeWrap(t,e)),t.create=function(){return new Sha256(e)},t.update=function(e){return t.create().update(e)};for(var r=0;r<OUTPUT_TYPES.length;++r){var n=OUTPUT_TYPES[r];t[n]=createOutputMethod(n,e)}return t},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(e){if("string"==typeof e)return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(null==e)throw new Error(ERROR);return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod},createHmacOutputMethod=function(e,t){return function(r,n){return new HmacSha256(r,t,!0).update(n)[e]()}},createHmacMethod=function(e){var t=createHmacOutputMethod("hex",e);t.create=function(t){return new HmacSha256(t,e)},t.update=function(e,r){return t.create(e).update(r)};for(var r=0;r<OUTPUT_TYPES.length;++r){var n=OUTPUT_TYPES[r];t[n]=createHmacOutputMethod(n,e)}return t};function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function HmacSha256(e,t,r){var n,a=typeof e;if("string"===a){var o,i=[],u=e.length,s=0;for(n=0;n<u;++n)(o=e.charCodeAt(n))<128?i[s++]=o:o<2048?(i[s++]=192|o>>6,i[s++]=128|63&o):o<55296||o>=57344?(i[s++]=224|o>>12,i[s++]=128|o>>6&63,i[s++]=128|63&o):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++n)),i[s++]=240|o>>18,i[s++]=128|o>>12&63,i[s++]=128|o>>6&63,i[s++]=128|63&o);e=i}else{if("object"!==a)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR)}e.length>64&&(e=new Sha256(t,!0).update(e).array());var l=[],f=[];for(n=0;n<64;++n){var c=e[n]||0;l[n]=92^c,f[n]=54^c}Sha256.call(this,t,r),this.update(f),this.oKeyPad=l,this.inner=!0,this.sharedMemory=r}Sha256.prototype.update=function(e){if(!this.finalized){var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR);t=!0}for(var n,a,o=0,i=e.length,u=this.blocks;o<i;){if(this.hashed&&(this.hashed=!1,u[0]=this.block,u[16]=u[1]=u[2]=u[3]=u[4]=u[5]=u[6]=u[7]=u[8]=u[9]=u[10]=u[11]=u[12]=u[13]=u[14]=u[15]=0),t)for(a=this.start;o<i&&a<64;++o)u[a>>2]|=e[o]<<SHIFT[3&a++];else for(a=this.start;o<i&&a<64;++o)(n=e.charCodeAt(o))<128?u[a>>2]|=n<<SHIFT[3&a++]:n<2048?(u[a>>2]|=(192|n>>6)<<SHIFT[3&a++],u[a>>2]|=(128|63&n)<<SHIFT[3&a++]):n<55296||n>=57344?(u[a>>2]|=(224|n>>12)<<SHIFT[3&a++],u[a>>2]|=(128|n>>6&63)<<SHIFT[3&a++],u[a>>2]|=(128|63&n)<<SHIFT[3&a++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++o)),u[a>>2]|=(240|n>>18)<<SHIFT[3&a++],u[a>>2]|=(128|n>>12&63)<<SHIFT[3&a++],u[a>>2]|=(128|n>>6&63)<<SHIFT[3&a++],u[a>>2]|=(128|63&n)<<SHIFT[3&a++]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.block=u[16],this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var e,t,r,n,a,o,i,u,s,l=this.h0,f=this.h1,c=this.h2,d=this.h3,_=this.h4,h=this.h5,p=this.h6,m=this.h7,b=this.blocks;for(e=16;e<64;++e)t=((a=b[e-15])>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,r=((a=b[e-2])>>>17|a<<15)^(a>>>19|a<<13)^a>>>10,b[e]=b[e-16]+t+b[e-7]+r<<0;for(s=f&c,e=0;e<64;e+=4)this.first?(this.is224?(o=300032,m=(a=b[0]-1413257819)-150054599<<0,d=a+24177077<<0):(o=704751109,m=(a=b[0]-210244248)-1521486534<<0,d=a+143694565<<0),this.first=!1):(t=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),n=(o=l&f)^l&c^s,m=d+(a=m+(r=(_>>>6|_<<26)^(_>>>11|_<<21)^(_>>>25|_<<7))+(_&h^~_&p)+K[e]+b[e])<<0,d=a+(t+n)<<0),t=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),n=(i=d&l)^d&f^o,p=c+(a=p+(r=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&_^~m&h)+K[e+1]+b[e+1])<<0,t=((c=a+(t+n)<<0)>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),n=(u=c&d)^c&l^i,h=f+(a=h+(r=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&m^~p&_)+K[e+2]+b[e+2])<<0,t=((f=a+(t+n)<<0)>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),n=(s=f&c)^f&d^u,_=l+(a=_+(r=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&p^~h&m)+K[e+3]+b[e+3])<<0,l=a+(t+n)<<0;this.h0=this.h0+l<<0,this.h1=this.h1+f<<0,this.h2=this.h2+c<<0,this.h3=this.h3+d<<0,this.h4=this.h4+_<<0,this.h5=this.h5+h<<0,this.h6=this.h6+p<<0,this.h7=this.h7+m<<0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,o=this.h5,i=this.h6,u=this.h7,s=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i];return this.is224||(s+=HEX_CHARS[u>>28&15]+HEX_CHARS[u>>24&15]+HEX_CHARS[u>>20&15]+HEX_CHARS[u>>16&15]+HEX_CHARS[u>>12&15]+HEX_CHARS[u>>8&15]+HEX_CHARS[u>>4&15]+HEX_CHARS[15&u]),s},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,o=this.h5,i=this.h6,u=this.h7,s=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,a>>24&255,a>>16&255,a>>8&255,255&a,o>>24&255,o>>16&255,o>>8&255,255&o,i>>24&255,i>>16&255,i>>8&255,255&i];return this.is224||s.push(u>>24&255,u>>16&255,u>>8&255,255&u),s},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&define((function(){return exports})))})()})),R={},$t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,hr,br,mr;function Si(){var e=Array.prototype.slice.call(arguments).join(" ");$t?mr.writeSync(2,e+"\n"):console.error(e)}function Ri(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:R._pthread_self()})}$t&&(hr=or(),br=hr.parentPort,br.on("message",(function(e){pr({data:e})})),mr=lr(),Object.assign(global,{self:global,require:Xe,Module:R,location:{href:__filename},Worker:hr.Worker,importScripts:function(e){(0,eval)(mr.readFileSync(e,"utf8"))},postMessage:function(e){br.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}}));var qe=Si;self.alert=Ri,R.instantiateWasm=(e,t)=>{var r=new WebAssembly.Instance(R.wasmModule,e);return t(r),R.wasmModule=null,r.exports},self.onmessage=e=>{try{if("load"===e.data.cmd)R.wasmModule=e.data.wasmModule,R.wasmMemory=e.data.wasmMemory,R.buffer=R.wasmMemory.buffer,R.ENVIRONMENT_IS_PTHREAD=!0,(e.data.urlOrBlob?Promise.resolve().then((()=>sr(Xe(e.data.urlOrBlob)))):Promise.resolve().then((()=>(dr(),Gt)))).then((function(e){return e.default(R)})).then((function(e){R=e}));else if("run"===e.data.cmd){R.__performance_now_clock_drift=performance.now()-e.data.time,R.__emscripten_thread_init(e.data.threadInfoStruct,0,0,1),R.establishStackSpace(),R.PThread.receiveObjectTransfer(e.data),R.PThread.threadInit();try{var t=R.invokeEntryPoint(e.data.start_routine,e.data.arg);R.keepRuntimeAlive()?R.PThread.setExitStatus(t):R.__emscripten_thread_exit(t)}catch(e){if("unwind"!=e){if(!(e instanceof R.ExitStatus))throw e;R.keepRuntimeAlive()||R.__emscripten_thread_exit(e.status)}}}else"cancel"===e.data.cmd?R._pthread_self()&&R.__emscripten_thread_exit(-1):"setimmediate"===e.data.target||("processProxyingQueue"===e.data.cmd?executeNotifiedProxyingQueue(e.data.queue):(qe("worker.js received unknown command "+e.data.cmd),qe(e.data)))}catch(e){throw qe("worker.js onmessage() captured an uncaught exception: "+e),e&&e.stack&&qe(e.stack),R.__emscripten_thread_crashed&&R.__emscripten_thread_crashed(),e}};var pr=self.onmessage;function Vt(){return R}function Jt(e){R=e}dr();var fe=sr(Qt()),Zt=function(e,t,r){var n;if(null!=(n=null==e?void 0:e.endpoint)&&n.startsWith("http")){let t=`${null==e?void 0:e.endpoint}`,r=t.indexOf("://")+3;return t.substring(r)}return null!=e&&e.endpoint?`${r}.${null==e?void 0:e.endpoint}`:`${r}.s3.amazonaws.com`};function Hi(e,t,r){var n,a,o,i;let u=en(t);return{url:u.path,query:"",host:Zt(e,t,u.bucket),region:null!=(n=null==e?void 0:e.region)?n:"",service:"s3",method:r,accessKeyId:null!=(a=null==e?void 0:e.accessKeyId)?a:"",secretAccessKey:null!=(o=null==e?void 0:e.secretAccessKey)?o:"",sessionToken:null!=(i=null==e?void 0:e.sessionToken)?i:"",dateNow:(new Date).toISOString().replace(/-/g,"").split("T")[0],datetimeNow:(new Date).toISOString().replace(/-/g,"").replace(/:/g,"").split(".")[0]+"Z"}}function Mi(e,t=!1){let r="0123456789ABCDEF",n="";for(let a=0;a<e.length;a++){let o=e[a];o>="A"&&o<="Z"||o>="a"&&o<="z"||o>="0"&&o<="9"||"_"==o||"-"==o||"~"==o||"."==o?n+=o:"/"==o?n+=t?"%2F":o:(n+="%",n+=r[o.charCodeAt(0)>>4],n+=r[15&o.charCodeAt(0)])}return n}function Ui(e,t=null){var r;let n=null!=(r=null==t?void 0:t.contentHash)?r:"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",a=new Map;a.set("x-amz-date",e.datetimeNow),a.set("x-amz-content-sha256",n),e.sessionToken&&a.set("x-amz-security-token",e.sessionToken);let o="";null!=t&&t.contentType&&(o+="content-type;"),o+="host;x-amz-content-sha256;x-amz-date",e.sessionToken&&(o+=";x-amz-security-token");let i=e.method+"\n"+Mi(e.url)+"\n"+e.query;null!=t&&t.contentType&&(i+="\ncontent-type:"+(null==t?void 0:t.contentType)),i+="\nhost:"+e.host+"\nx-amz-content-sha256:"+n+"\nx-amz-date:"+e.datetimeNow,e.sessionToken&&e.sessionToken.length>0&&(i+="\nx-amz-security-token:"+e.sessionToken),i+="\n\n"+o+"\n"+n;let u=(0,fe.sha256)(i),s="AWS4-HMAC-SHA256\n"+e.datetimeNow+"\n"+e.dateNow+"/"+e.region+"/"+e.service+"/aws4_request\n"+u,l="AWS4"+e.secretAccessKey,f=fe.sha256.hmac.arrayBuffer(l,e.dateNow),c=fe.sha256.hmac.arrayBuffer(f,e.region),d=fe.sha256.hmac.arrayBuffer(c,e.service),_=fe.sha256.hmac.arrayBuffer(d,"aws4_request"),h=fe.sha256.hmac(_,s);return a.set("Authorization","AWS4-HMAC-SHA256 Credential="+e.accessKeyId+"/"+e.dateNow+"/"+e.region+"/"+e.service+"/aws4_request, SignedHeaders="+o+", Signature="+h),a}var Ii=function(e,t,r,n=null,a=null){return Ui(Hi(e,t,r),{contentType:n,contentHash:a?fe.sha256.hex(a):null})};function ce(e,t,r,n,a=null,o=null){((null==t?void 0:t.accessKeyId)||(null==t?void 0:t.sessionToken))&&(Ii(t,r,n,a,o).forEach(((t,r)=>{e.setRequestHeader(r,t)})),a&&e.setRequestHeader("content-type",a))}function en(e){if(0!=e.indexOf("s3://"))throw new Error("URL needs to start with s3://");let t=e.indexOf("/",5);if(-1==t)throw new Error("URL needs to contain a '/' after the host");let r=e.substring(5,t);if(!r)throw new Error("URL needs to contain a bucket name");let n=e.substring(t);if(!n)throw new Error("URL needs to contain key");return{bucket:r,path:n}}function _e(e,t){var r;let n=en(t);return null!=(r=null==e?void 0:e.endpoint)&&r.startsWith("http")?`${null==e?void 0:e.endpoint}/${n.bucket}`+n.path:"https://"+Zt(e,t,n.bucket)+n.path}var nn=new TextEncoder,rn=new TextDecoder("utf-8");function gr(e,t,r){let n=nn.encode(r),a=e._malloc(n.byteLength),o=e.HEAPU8.subarray(a,a+n.byteLength);o.set(n),e.HEAPF64[0+(t>>3)]=1,e.HEAPF64[1+(t>>3)]=a,e.HEAPF64[2+(t>>3)]=o.byteLength}function wr(e){switch(e){case"UINT8":case"INT8":return 1;case"INT32":case"FLOAT":return 4;case"INT64":case"UINT64":case"DOUBLE":case"VARCHAR":return 8;default:return 0}}function yr(e,t,r,n){let a=e.HEAPU8.subarray(t,t+n*wr(r));switch(r){case"UINT8":return new Uint8Array(a.buffer,a.byteOffset,n);case"INT8":return new Int8Array(a.buffer,a.byteOffset,n);case"INT32":return new Int32Array(a.buffer,a.byteOffset,n);case"FLOAT":return new Float32Array(a.buffer,a.byteOffset,n);case"DOUBLE":case"VARCHAR":return new Float64Array(a.buffer,a.byteOffset,n);default:return new Array(0)}}function tn(e,t,r){let n=e.HEAPU8.subarray(t,t+r);return new Uint8Array(n.buffer,n.byteOffset,r)}function Ke(e,t,r){let n=e.HEAPU8.subarray(t,t+8*r);return new Float64Array(n.buffer,n.byteOffset,r)}function an(e,t,r,n,a,o,i,u){try{let s=e._udfFunctions.get(n);if(!s)return void gr(t,r,"Unknown UDF with id: "+n);let l=rn.decode(t.HEAPU8.subarray(a,a+o)),f=JSON.parse(l),c=Ke(t,i,u/8),d=e=>{var r;let n=null;switch(void 0!==e.validityBuffer&&(n=tn(t,c[e.validityBuffer],f.rows)),e.physicalType){case"VARCHAR":{if(null===e.dataBuffer||void 0===e.dataBuffer)throw new Error("malformed data view, expected data buffer for VARCHAR argument");if(null===e.lengthBuffer||void 0===e.lengthBuffer)throw new Error("malformed data view, expected data length buffer for VARCHAR argument");let r=yr(t,c[e.dataBuffer],e.physicalType,f.rows),a=[],o=Ke(t,c[e.lengthBuffer],f.rows);for(let e=0;e<f.rows;++e){if(null!=n&&!n[e]){a.push(null);continue}let i=t.HEAPU8.subarray(r[e],r[e]+o[e]),u=rn.decode(i);a.push(u)}return e=>a[e]}case"STRUCT":{let t={},a=[];for(let n=0;n<((null==(r=e.children)?void 0:r.length)||0);++n){let r=e.children[n],o=d(r);a.push((e=>{t[r.name]=o(e)}))}return null!=n?e=>{if(!n[e])return null;for(let t of a)t(e);return t}:e=>{for(let t of a)t(e);return t}}default:{if(void 0===e.dataBuffer)throw new Error("malformed data view, expected data buffer for argument of type: "+e.physicalType);let r=yr(t,c[e.dataBuffer],e.physicalType,f.rows);return null!=n?e=>n[e]?r[e]:null:e=>r[e]}}},_=[];for(let e=0;e<f.args.length;++e)_.push(d(f.args[e]));let h=f.rows*wr(f.ret.physicalType),p=t._malloc(h),m=yr(t,p,f.ret.physicalType,f.rows),b=t._malloc(f.rows),y=tn(t,b,f.rows);if(0==m.length||0==y.length)return void gr(t,r,"Can't create physical arrays for result");let g=m;"VARCHAR"==f.ret.physicalType&&(g=new Array(f.rows));let w=[];for(let e=0;e<f.args.length;++e)w.push(null);for(let e=0;e<f.rows;++e){for(let t=0;t<f.args.length;++t)w[t]=_[t](e);let t=s.func(...w);g[e]=t,y[e]=null==t?0:1}let v=0;if("VARCHAR"===f.ret.physicalType){let e=new Array(0);v=t._malloc(f.rows*wr("DOUBLE"));let r=Ke(t,v,f.rows),n=0;for(let t=0;t<f.rows;++t){let a=nn.encode(g[t]||"");e.push(a),r[t]=a.length,n+=a.length}let a=t._malloc(n),o=t.HEAPU8.subarray(a,a+n),i=0;for(let t=0;t<f.rows;++t){m[t]=i;let r=e[t];o.subarray(i,i+r.length).set(r),i+=r.length}}let A=24,E=t._malloc(A),R=Ke(t,E,3);R[0]=p,R[1]=b,R[2]=v,t.HEAPF64[0+(r>>3)]=0,t.HEAPF64[1+(r>>3)]=E,t.HEAPF64[2+(r>>3)]=0}catch(e){gr(t,r,e.toString())}}function Ci(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}var Ni=Ci();function se(e,t){e.ccall("duckdb_web_fail_with",null,["string"],[t])}function ae(e,t,r){return Ni(e.HEAPU8.subarray(t,t+r))}function vr(e,t,r,n){let a=e.stackSave(),o=e.stackAlloc(24);r.unshift("number"),n.unshift(o),e.ccall(t,null,r,n);let i=e.HEAPF64[0+(o>>3)],u=e.HEAPF64[1+(o>>3)],s=e.HEAPF64[2+(o>>3)];return e.stackRestore(a),[i,u,s]}function Er(e){e.ccall("duckdb_web_clear_response",null,[],[])}var M={_files:new Map,_fileInfoCache:new Map,_udfFunctions:new Map,_globalFileInfo:null,getFileInfo(e,t){try{let r=M._fileInfoCache.get(t),[n,a,o]=vr(e,"duckdb_web_fs_get_file_info_by_id",["number","number"],[t,(null==r?void 0:r.cacheEpoch)||0]);if(0!==n)return null;if(0===o)return r;let i=ae(e,a,o);Er(e);let u=JSON.parse(i);if(null==u)return null;let s={...u,blob:null};return M._fileInfoCache.set(t,s),s}catch(e){return null}},getGlobalFileInfo(e){var t;try{let[r,n,a]=vr(e,"duckdb_web_get_global_file_info",["number"],[(null==(t=M._globalFileInfo)?void 0:t.cacheEpoch)||0]);if(0!==r)return null;if(0===a)return M._globalFileInfo;let o=ae(e,n,a);Er(e);let i=JSON.parse(o);return null==i?null:(M._globalFileInfo={...i,blob:null},M._globalFileInfo)}catch(e){return null}},testPlatformFeature:(e,t)=>1===t?typeof BigInt64Array<"u":(console.warn(`test for unknown feature: ${t}`),!1),openFile:(e,t,r)=>{var n;try{M._fileInfoCache.delete(t);let a=M.getFileInfo(e,t);switch(null==a?void 0:a.dataProtocol){case 3:case 4:{if(1&r&&2&r)throw new Error(`Opening file ${a.fileName} failed: cannot open file with both read and write flags set`);if(32&r)throw new Error(`Opening file ${a.fileName} failed: appending to HTTP/S3 files is not supported`);if(2&r){let t=new XMLHttpRequest;if(4==a.dataProtocol?(t.open("HEAD",_e(a.s3Config,a.dataUrl),!1),ce(t,a.s3Config,a.dataUrl,"HEAD")):t.open("HEAD",a.dataUrl,!1),t.send(null),200!=t.status&&404!=t.status)throw new Error(`Opening file ${a.fileName} failed: Unexpected return status from server (${t.status})`);if(404==t.status&&!(8&r||16&r))throw new Error(`Opening file ${a.fileName} failed: Cannot write to non-existent file without FILE_FLAGS_FILE_CREATE or FILE_FLAGS_FILE_CREATE_NEW flag.`);let n=e._malloc(1),o=new Uint8Array;e.HEAPU8.set(o,n);let i=e._malloc(16);return e.HEAPF64[0+(i>>3)]=1,e.HEAPF64[1+(i>>3)]=n,i}if(1!=r)throw new Error(`Opening file ${a.fileName} failed: unsupported file flags: ${r}`);let t=null;try{let t=new XMLHttpRequest;4==a.dataProtocol?(t.open("HEAD",_e(a.s3Config,a.dataUrl),!1),ce(t,a.s3Config,a.dataUrl,"HEAD")):t.open("HEAD",a.dataUrl,!1),t.setRequestHeader("Range","bytes=0-"),t.send(null);let r=t.getResponseHeader("Content-Length");if(206==t.status&&null!==r){let t=e._malloc(16);return e.HEAPF64[0+(t>>3)]=+r,e.HEAPF64[1+(t>>3)]=0,t}}catch(e){t=e,console.warn(`HEAD request with range header failed: ${e}`)}if(a.allowFullHttpReads){console.warn(`falling back to full HTTP read for: ${a.dataUrl}`);let t=new XMLHttpRequest;if(4==a.dataProtocol?(t.open("GET",_e(a.s3Config,a.dataUrl),!1),ce(t,a.s3Config,a.dataUrl,"GET")):t.open("GET",a.dataUrl,!1),t.responseType="arraybuffer",t.send(null),200==t.status){let r=e._malloc(t.response.byteLength),n=new Uint8Array(t.response,0,t.response.byteLength);e.HEAPU8.set(n,r);let a=e._malloc(16);return e.HEAPF64[0+(a>>3)]=t.response.byteLength,e.HEAPF64[1+(a>>3)]=r,a}}if(null!=t)throw new Error(`Reading file ${a.fileName} failed with error: ${t}`);return 0}case 1:{let t=null==(n=M._files)?void 0:n.get(a.fileName);if(t){let r=e._malloc(16);return e.HEAPF64[0+(r>>3)]=t.size,e.HEAPF64[1+(r>>3)]=0,r}console.warn(`Buffering missing file: ${a.fileName}`);let r=e._malloc(16),o=e._malloc(1);return e.HEAPF64[0+(r>>3)]=1,e.HEAPF64[1+(r>>3)]=o,r}}}catch(t){console.error(t.toString()),se(e,t.toString())}return 0},glob:(e,t,r)=>{try{let n=ae(e,t,r);if(n.startsWith("http")||n.startsWith("s3://")){let t=new XMLHttpRequest;if(n.startsWith("s3://")){let r=M.getGlobalFileInfo(e);t.open("HEAD",_e(null==r?void 0:r.s3Config,n),!1),ce(t,null==r?void 0:r.s3Config,n,"HEAD")}else t.open("HEAD",n,!1);if(t.send(null),200!=t.status&&206!==t.status)return void se(e,`HEAD request failed: ${n}`);e.ccall("duckdb_web_fs_glob_add_path",null,["string"],[n])}}catch(t){return se(e,t.toString()),0}},checkFile:(e,t,r)=>{try{let n=ae(e,t,r);if(n.startsWith("http")||n.startsWith("s3://")){let t=new XMLHttpRequest;if(n.startsWith("s3://")){let r=M.getGlobalFileInfo(e);t.open("HEAD",_e(null==r?void 0:r.s3Config,n),!1),ce(t,null==r?void 0:r.s3Config,n,"HEAD")}else t.open("HEAD",n,!1);return t.send(null),206==t.status||200==t.status}}catch(e){return!1}return!1},syncFile:(e,t)=>{},closeFile:(e,t)=>{let r=M.getFileInfo(e,t);switch(M._fileInfoCache.delete(t),null==r?void 0:r.dataProtocol){case 3:case 4:break;case 1:return}},truncateFile:(e,t,r)=>{let n=M.getFileInfo(e,t);switch(null==n?void 0:n.dataProtocol){case 3:return void se(e,"Cannot truncate a http file");case 4:return void se(e,"Cannot truncate an s3 file");case 1:return void se(e,"truncateFile not implemented")}return 0},readFile(e,t,r,n,a){var o;try{let i=M.getFileInfo(e,t);switch(null==i?void 0:i.dataProtocol){case 3:case 4:if(!i.dataUrl)throw new Error(`Missing data URL for file ${t}`);try{let t=new XMLHttpRequest;if(4==i.dataProtocol?(t.open("GET",_e(null==i?void 0:i.s3Config,i.dataUrl),!1),ce(t,null==i?void 0:i.s3Config,i.dataUrl,"GET")):t.open("GET",i.dataUrl,!1),t.responseType="arraybuffer",t.setRequestHeader("Range",`bytes=${a}-${a+n-1}`),t.send(null),206==t.status||200==t.status&&n==t.response.byteLength&&0==a){let a=new Uint8Array(t.response,0,Math.min(t.response.byteLength,n));return e.HEAPU8.set(a,r),a.byteLength}throw 200==t.status?new Error(`Range request for ${i.dataUrl} did not return a partial response: ${t.status} "${t.statusText}"`):new Error(`Range request for ${i.dataUrl} did returned non-success status: ${t.status} "${t.statusText}"`)}catch(e){throw new Error(`Range request for ${i.dataUrl} failed with error: ${e}"`)}case 1:{let t=null==(o=M._files)?void 0:o.get(i.fileName);if(!t)throw new Error(`No handle available for file: ${i.fileName}`);let u=t.slice(a,a+n),s=new Uint8Array((new FileReaderSync).readAsArrayBuffer(u));return e.HEAPU8.set(s,r),s.byteLength}}return 0}catch(t){return se(e,t.toString()),0}},writeFile:(e,t,r,n,a)=>{let o=M.getFileInfo(e,t);switch(null==o?void 0:o.dataProtocol){case 3:return se(e,"Cannot write to HTTP file"),0;case 4:{let t=e.HEAPU8.subarray(r,r+n),a=new XMLHttpRequest;return a.open("PUT",_e(null==o?void 0:o.s3Config,o.dataUrl),!1),ce(a,null==o?void 0:o.s3Config,o.dataUrl,"PUT","",t),a.send(t),n}case 1:return se(e,"writefile not implemented"),0}return 0},getLastFileModificationTime:(e,t)=>{var r;let n=M.getFileInfo(e,t);switch(null==n?void 0:n.dataProtocol){case 1:if(!(null==(r=M._files)?void 0:r.get(n.fileName)))throw Error(`No handle available for file: ${n.fileName}`);return 0;case 3:case 4:return(new Date).getTime()}return 0},checkDirectory:(e,t,r)=>{let n=ae(e,t,r);return console.log(`checkDirectory: ${n}`),!1},createDirectory:(e,t,r)=>{let n=ae(e,t,r);console.log(`createDirectory: ${n}`)},removeDirectory:(e,t,r)=>{let n=ae(e,t,r);console.log(`removeDirectory: ${n}`)},listDirectoryEntries:(e,t,r)=>{let n=ae(e,t,r);return console.log(`listDirectoryEntries: ${n}`),!1},moveFile:(e,t,r,n,a)=>{var o,i;let u=ae(e,t,r),s=ae(e,n,a),l=null==(o=M._files)?void 0:o.get(u);void 0!==l&&(M._files.delete(l),M._files.set(s,l));for(let[e,t]of(null==(i=M._fileInfoCache)?void 0:i.entries())||[])if(t.dataUrl==u){M._fileInfoCache.delete(e);break}return!0},removeFile:(e,t,r)=>{},callScalarUDF:(e,t,r,n,a,o,i)=>{an(M,e,t,r,n,a,o,i)}};globalThis.DUCKDB_RUNTIME={};for(let e of Object.getOwnPropertyNames(M))"constructor"!=e&&(globalThis.DUCKDB_RUNTIME[e]=Object.getOwnPropertyDescriptor(M,e).value);globalThis.onmessage=e=>{if("load"===e.data.cmd){let t=Vt();t.wasmModule=e.data.wasmModule,t.wasmMemory=e.data.wasmMemory,t.buffer=t.wasmMemory.buffer,t.ENVIRONMENT_IS_PTHREAD=!0,_r(t).then((function(e){Jt(e)}))}else if("registerFileHandle"===e.data.cmd)globalThis.DUCKDB_RUNTIME._files=globalThis.DUCKDB_RUNTIME._files||new Map,globalThis.DUCKDB_RUNTIME._files.set(e.data.fileName,e.data.fileHandle);else if("dropFileHandle"===e.data.cmd)globalThis.DUCKDB_RUNTIME._files=globalThis.DUCKDB_RUNTIME._files||new Map,globalThis.DUCKDB_RUNTIME._files.delete(e.data.fileName);else if("registerUDFFunction"===e.data.cmd)globalThis.DUCKDB_RUNTIME._udfFunctions=globalThis.DUCKDB_RUNTIME._files||new Map,globalThis.DUCKDB_RUNTIME._udfFunctions.set(e.data.udf.name,e.data.udf);else if("dropUDFFunctions"===e.data.cmd){globalThis.DUCKDB_RUNTIME._udfFunctions=globalThis.DUCKDB_RUNTIME._files||new Map;for(let t of globalThis.DUCKDB_RUNTIME._udfFunctions.keys())globalThis.DUCKDB_RUNTIME._udfFunctions.get(t).connection_id==e.data.connectionId&&globalThis.DUCKDB_RUNTIME._udfFunctions.delete(t)}else pr(e)}})();